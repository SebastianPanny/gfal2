\section{gfal\_\-testread.c}
This exemple show how to open and read a file ex : use case with LFC plugin : ./gfal\_\-testread lfn:/grid/dteam/test\_\-skywalker



\begin{DocInclude}\begin{verbatim}1 
6 #include <fcntl.h>
7 #include <stdio.h>
8 #include <stdlib.h>
9 #include <errno.h>
10 #include "gfal_api.h"
11 #define BLKLEN 65536
12 
13 main(int argc, char **argv)
14 {
15         int fd;
16         char ibuf[BLKLEN];
17         int rc;
18 
19         if (argc != 2) {
20                 fprintf (stderr, "usage: %s filename\n", argv[0]);
21                 exit (1);
22         }
23 
24         printf ("opening %s\n", argv[1]);
25         if ((fd = gfal_open (argv[1], O_RDONLY, 0)) < 0) {
26                 perror ("gfal_open");
27                 exit (1);
28         }
29         printf ("open successful, fd = %d (errno = %d)\n", fd, errno);
30 
31         if ((rc = gfal_read (fd, ibuf, BLKLEN)) < 0) {
32                 perror ("gfal_read");
33                 (void) gfal_close (fd);
34                 exit (1);
35         }
36         printf ("read successful (errno = %d)\n", errno);
37 
38         if ((rc = gfal_close (fd)) < 0) {
39                 perror ("gfal_close");
40                 exit (1);
41         }
42         printf ("close successful\n");
43         exit (0);
44 }
\end{verbatim}
\end{DocInclude}
 