\section{gfal\_\-testchmod.c}
This exemple show how to change the right on a file/directory ex : use case with SRM plugin : ./gfal\_\-testdir srm://grid05.lal.in2p3.fr:8446/dpm/lal.in2p3.fr/home/dteam/test\_\-obiwankenobi



\begin{DocInclude}\begin{verbatim}1 
5 #include <stdio.h>
6 #include <stdlib.h>
7 #include <unistd.h>
8 #include <errno.h>
9 #include "gfal_api.h"
10 
11 main(int argc, char **argv)
12 {
13         int mode, error = 0;
14         char *file;
15 
16         if (argc != 3) {
17                 fprintf (stderr, "usage: %s file mode\n", argv[0]);
18                 exit (1);
19         }
20 
21         file = argv[1];
22         mode = strtol (argv[2], NULL, 8);
23         if (errno > 0) {
24                 perror ("strtol");
25                 exit (1);
26         }
27 
28         printf ("Checking RW access to '%s'...\n",file);
29         if (gfal_access (file, R_OK|W_OK) < 0) {
30                 error = 1;
31                 gfal_posix_check_error();
32         }
33 
34         printf ("Changing mode of '%s' to %o...\n", file, mode);
35         if (gfal_chmod (file, mode) < 0) {
36                 error = 1;
37                 gfal_posix_check_error();
38         }
39 
40         if (error) exit (1);
41 
42         printf ("All is ok.\n");
43         exit (0);
44 }
\end{verbatim}
\end{DocInclude}
 