\section{gfal\_\-testchmod.c}
This exemple show how to change the right on a file/directory ex : use case with SRM plugin : ./gfal\_\-testdir srm://grid05.lal.in2p3.fr:8446/dpm/lal.in2p3.fr/home/dteam/test\_\-obiwankenobi



\begin{DocInclude}\begin{verbatim}1 /*
2  * Copyright (c) Members of the EGEE Collaboration. 2004.
3  * See http://www.eu-egee.org/partners/ for details on the copyright holders.
4  *
5  * Licensed under the Apache License, Version 2.0 (the "License");
6  * you may not use this file except in compliance with the License.
7  * You may obtain a copy of the License at
8  * 
9  *     http://www.apache.org/licenses/LICENSE-2.0
10  * 
11  * Unless required by applicable law or agreed to in writing, software
12  * distributed under the License is distributed on an "AS IS" BASIS,
13  * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
14  * See the License for the specific language governing permissions and
15  * limitations under the License.
16  */
17 
18 /*
19  * @(#)$RCSfile: gfal_testchmod.c,v $ $Revision: 1.3 $ $Date: 2008/05/08 13:16:36 $ CERN Remi Mollon
20  */
21 
22 #include <stdio.h>
23 #include <stdlib.h>
24 #include <unistd.h>
25 #include <errno.h>
26 #include "gfal_api.h"
27 
28 main(int argc, char **argv)
29 {
30         int mode, error = 0;
31         char *file;
32 
33         if (argc != 3) {
34                 fprintf (stderr, "usage: %s file mode\n", argv[0]);
35                 exit (1);
36         }
37 
38         file = argv[1];
39         mode = strtol (argv[2], NULL, 8);
40         if (errno > 0) {
41                 perror ("strtol");
42                 exit (1);
43         }
44 
45         printf ("Checking RW access to '%s'...\n",file);
46         if (gfal_access (file, R_OK|W_OK) < 0) {
47                 error = 1;
48                 perror ("gfal_access");
49         }
50 
51         printf ("Changing mode of '%s' to %o...\n", file, mode);
52         if (gfal_chmod (file, mode) < 0) {
53                 error = 1;
54                 perror ("gfal_chmod");
55         }
56 
57         if (error) exit (1);
58 
59         printf ("All is ok.\n");
60         exit (0);
61 }
\end{verbatim}
\end{DocInclude}
 