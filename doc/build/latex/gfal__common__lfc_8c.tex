\section{/home/adevress/myworkspace/gfal/src/common/lfc/gfal\_\-common\_\-lfc.c File Reference}
\label{gfal__common__lfc_8c}\index{/home/adevress/myworkspace/gfal/src/common/lfc/gfal_common_lfc.c@{/home/adevress/myworkspace/gfal/src/common/lfc/gfal\_\-common\_\-lfc.c}}
file for the lfc plugin module 

{\tt \#include $<$regex.h$>$}\par
{\tt \#include $<$pthread.h$>$}\par
{\tt \#include $<$errno.h$>$}\par
{\tt \#include $<$sys/types.h$>$}\par
{\tt \#include $<$dirent.h$>$}\par
{\tt \#include $<$attr/xattr.h$>$}\par
{\tt \#include $<$common/gfal\_\-prototypes.h$>$}\par
{\tt \#include $<$common/gfal\_\-types.h$>$}\par
{\tt \#include $<$common/gfal\_\-common\_\-plugin.h$>$}\par
{\tt \#include \char`\"{}gfal\_\-common\_\-lfc.h\char`\"{}}\par
{\tt \#include \char`\"{}gfal\_\-common\_\-lfc\_\-open.h\char`\"{}}\par
{\tt \#include \char`\"{}../gfal\_\-common\_\-internal.h\char`\"{}}\par
{\tt \#include \char`\"{}../gfal\_\-common\_\-errverbose.h\char`\"{}}\par
{\tt \#include \char`\"{}../gfal\_\-common\_\-filedescriptor.h\char`\"{}}\par
{\tt \#include \char`\"{}lfc\_\-ifce\_\-ng.h\char`\"{}}\par
\subsection*{Data Structures}
\begin{CompactItemize}
\item 
struct \textbf{\_\-lfc\_\-opendir\_\-handle}
\end{CompactItemize}
\subsection*{Typedefs}
\begin{CompactItemize}
\item 
typedef \_\-lfc\_\-opendir\_\-handle $\ast$ \textbf{lfc\_\-opendir\_\-handle}\label{gfal__common__lfc_8c_5cac68b08f5b09ea46c43428e0fc2cc2}

\end{CompactItemize}
\subsection*{Functions}
\begin{CompactItemize}
\item 
const char $\ast$ \bf{lfc\_\-get\-Name} ()
\item 
int \bf{lfc\_\-chmod\-G} (plugin\_\-handle handle, const char $\ast$path, mode\_\-t mode, GError $\ast$$\ast$err)
\item 
int \bf{lfc\_\-access\-G} (plugin\_\-handle handle, const char $\ast$lfn, int mode, GError $\ast$$\ast$err)
\item 
int \bf{lfc\_\-rename\-G} (plugin\_\-handle handle, const char $\ast$oldpath, const char $\ast$newpath, GError $\ast$$\ast$err)
\item 
int \bf{lfc\_\-symlink\-G} (plugin\_\-handle handle, const char $\ast$oldpath, const char $\ast$newpath, GError $\ast$$\ast$err)
\item 
int \bf{lfc\_\-stat\-G} (plugin\_\-handle handle, const char $\ast$path, struct stat $\ast$st, GError $\ast$$\ast$err)
\item 
char $\ast$$\ast$ \bf{lfc\_\-get\-SURLG} (plugin\_\-handle handle, const char $\ast$path, GError $\ast$$\ast$err)
\item 
ssize\_\-t \bf{lfc\_\-getxattr\_\-getsurl} (plugin\_\-handle handle, const char $\ast$path, void $\ast$buff, size\_\-t size, GError $\ast$$\ast$err)
\item 
ssize\_\-t \bf{lfc\_\-getxattr\_\-getguid} (plugin\_\-handle handle, const char $\ast$path, void $\ast$buff, size\_\-t size, GError $\ast$$\ast$err)
\item 
ssize\_\-t \bf{lfc\_\-getxattr\_\-comment} (plugin\_\-handle handle, const char $\ast$path, void $\ast$buff, size\_\-t size, GError $\ast$$\ast$err)
\item 
ssize\_\-t \bf{lfc\_\-getxattr\-G} (plugin\_\-handle handle, const char $\ast$path, const char $\ast$name, void $\ast$buff, size\_\-t size, GError $\ast$$\ast$err)
\item 
ssize\_\-t \bf{lfc\_\-listxattr\-G} (plugin\_\-handle handle, const char $\ast$path, char $\ast$list, size\_\-t size, GError $\ast$$\ast$err)
\item 
int \bf{lfc\_\-setxattr\_\-comment} (plugin\_\-handle handle, const char $\ast$path, const char $\ast$name, const void $\ast$value, size\_\-t size, int flags, GError $\ast$$\ast$err)
\item 
int \bf{lfc\_\-setxattr\-G} (plugin\_\-handle handle, const char $\ast$path, const char $\ast$name, const void $\ast$value, size\_\-t size, int flags, GError $\ast$$\ast$err)
\item 
char $\ast$ \bf{lfc\_\-resolve\_\-guid} (plugin\_\-handle handle, const char $\ast$guid, GError $\ast$$\ast$err)
\item 
int \bf{lfc\_\-is\_\-used\_\-parameter} (plugin\_\-handle handle, const char $\ast$namespace, const char $\ast$key)
\item 
void \bf{lfc\_\-notify\_\-change\_\-parameter} (plugin\_\-handle handle, const char $\ast$namespace, const char $\ast$key)
\item 
\bf{gfal\_\-plugin\_\-interface} \bf{gfal\_\-plugin\_\-init} (gfal\_\-handle handle, GError $\ast$$\ast$err)
\item 
gboolean \bf{gfal\_\-checker\_\-guid} (const char $\ast$guid, GError $\ast$$\ast$err)
\item 
gboolean \bf{gfal\_\-lfc\_\-check\_\-lfn\_\-url} (plugin\_\-handle handle, const char $\ast$url, plugin\_\-mode mode, GError $\ast$$\ast$err)
\end{CompactItemize}
\subsection*{Variables}
\begin{CompactItemize}
\item 
pthread\_\-mutex\_\-t \textbf{m\_\-lfcinit} = PTHREAD\_\-MUTEX\_\-INITIALIZER\label{gfal__common__lfc_8c_a683cb37b7f14c7d477e4653816d20df}

\end{CompactItemize}


\subsection{Detailed Description}
file for the lfc plugin module 

\begin{Desc}
\item[Author:]Adrien Devresse \end{Desc}
\begin{Desc}
\item[Version:]0.0.1 \end{Desc}
\begin{Desc}
\item[Date:]06/07/2011 \end{Desc}


\subsection{Function Documentation}
\index{gfal_common_lfc.c@{gfal\_\-common\_\-lfc.c}!gfal_checker_guid@{gfal\_\-checker\_\-guid}}
\index{gfal_checker_guid@{gfal\_\-checker\_\-guid}!gfal_common_lfc.c@{gfal\_\-common\_\-lfc.c}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}gboolean gfal\_\-checker\_\-guid (const char $\ast$ {\em guid}, GError $\ast$$\ast$ {\em err})}\label{gfal__common__lfc_8c_c7f9448e809d5c82f58288d1491dc2d0}


parse a guid to check the validity \index{gfal_common_lfc.c@{gfal\_\-common\_\-lfc.c}!gfal_lfc_check_lfn_url@{gfal\_\-lfc\_\-check\_\-lfn\_\-url}}
\index{gfal_lfc_check_lfn_url@{gfal\_\-lfc\_\-check\_\-lfn\_\-url}!gfal_common_lfc.c@{gfal\_\-common\_\-lfc.c}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}gboolean gfal\_\-lfc\_\-check\_\-lfn\_\-url (plugin\_\-handle {\em handle}, const char $\ast$ {\em url}, plugin\_\-mode {\em mode}, GError $\ast$$\ast$ {\em err})}\label{gfal__common__lfc_8c_dd0bcee4d6721102a3be26faf02d9ad8}


Check if the passed url and operation is compatible with lfc \index{gfal_common_lfc.c@{gfal\_\-common\_\-lfc.c}!gfal_plugin_init@{gfal\_\-plugin\_\-init}}
\index{gfal_plugin_init@{gfal\_\-plugin\_\-init}!gfal_common_lfc.c@{gfal\_\-common\_\-lfc.c}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}\bf{gfal\_\-plugin\_\-interface} gfal\_\-plugin\_\-init (gfal\_\-handle {\em handle}, GError $\ast$$\ast$ {\em err})}\label{gfal__common__lfc_8c_0d53404e0e873535bffdfb3197bb73af}


Map function for the lfc interface this function provide the generic PLUGIN interface for the LFC plugin. lfc\_\-init\-G do : liblfc shared library load, sym resolve, endpoint check, and plugin function map. \index{gfal_common_lfc.c@{gfal\_\-common\_\-lfc.c}!lfc_accessG@{lfc\_\-accessG}}
\index{lfc_accessG@{lfc\_\-accessG}!gfal_common_lfc.c@{gfal\_\-common\_\-lfc.c}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}int lfc\_\-access\-G (plugin\_\-handle {\em handle}, const char $\ast$ {\em lfn}, int {\em mode}, GError $\ast$$\ast$ {\em err})}\label{gfal__common__lfc_8c_3b184ab14ac0fac2931aeb7336989553}


implementation of the access call with the lfc plugin return 0 or -1 if error and report GError$\ast$$\ast$ with error code and message \index{gfal_common_lfc.c@{gfal\_\-common\_\-lfc.c}!lfc_chmodG@{lfc\_\-chmodG}}
\index{lfc_chmodG@{lfc\_\-chmodG}!gfal_common_lfc.c@{gfal\_\-common\_\-lfc.c}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}int lfc\_\-chmod\-G (plugin\_\-handle {\em handle}, const char $\ast$ {\em path}, mode\_\-t {\em mode}, GError $\ast$$\ast$ {\em err})}\label{gfal__common__lfc_8c_e18ac164a5882443e74ba8f622186e42}


Implementation of the chmod function with the LFC plugin return 0 or the errno if error, or set GError if serious error \index{gfal_common_lfc.c@{gfal\_\-common\_\-lfc.c}!lfc_getName@{lfc\_\-getName}}
\index{lfc_getName@{lfc\_\-getName}!gfal_common_lfc.c@{gfal\_\-common\_\-lfc.c}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}const char$\ast$ lfc\_\-get\-Name ()}\label{gfal__common__lfc_8c_67715cf749ea720de31abbc67f9f414e}


just return the name of the layer \index{gfal_common_lfc.c@{gfal\_\-common\_\-lfc.c}!lfc_getSURLG@{lfc\_\-getSURLG}}
\index{lfc_getSURLG@{lfc\_\-getSURLG}!gfal_common_lfc.c@{gfal\_\-common\_\-lfc.c}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}char$\ast$$\ast$ lfc\_\-get\-SURLG (plugin\_\-handle {\em handle}, const char $\ast$ {\em path}, GError $\ast$$\ast$ {\em err})}\label{gfal__common__lfc_8c_ab2b9f80b14228974befa9d005ea7bc9}


resolve the lfc link to the surls \index{gfal_common_lfc.c@{gfal\_\-common\_\-lfc.c}!lfc_getxattr_comment@{lfc\_\-getxattr\_\-comment}}
\index{lfc_getxattr_comment@{lfc\_\-getxattr\_\-comment}!gfal_common_lfc.c@{gfal\_\-common\_\-lfc.c}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}ssize\_\-t lfc\_\-getxattr\_\-comment (plugin\_\-handle {\em handle}, const char $\ast$ {\em path}, void $\ast$ {\em buff}, size\_\-t {\em size}, GError $\ast$$\ast$ {\em err})}\label{gfal__common__lfc_8c_78bd16529e609c94b3715efe38e901a5}


lfc getxattr for path -$>$ comment resolution \index{gfal_common_lfc.c@{gfal\_\-common\_\-lfc.c}!lfc_getxattr_getguid@{lfc\_\-getxattr\_\-getguid}}
\index{lfc_getxattr_getguid@{lfc\_\-getxattr\_\-getguid}!gfal_common_lfc.c@{gfal\_\-common\_\-lfc.c}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}ssize\_\-t lfc\_\-getxattr\_\-getguid (plugin\_\-handle {\em handle}, const char $\ast$ {\em path}, void $\ast$ {\em buff}, size\_\-t {\em size}, GError $\ast$$\ast$ {\em err})}\label{gfal__common__lfc_8c_264e0ecec42fb618c37740ccbf38e427}


lfc getxattr for the path -$>$ guid resolution \index{gfal_common_lfc.c@{gfal\_\-common\_\-lfc.c}!lfc_getxattr_getsurl@{lfc\_\-getxattr\_\-getsurl}}
\index{lfc_getxattr_getsurl@{lfc\_\-getxattr\_\-getsurl}!gfal_common_lfc.c@{gfal\_\-common\_\-lfc.c}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}ssize\_\-t lfc\_\-getxattr\_\-getsurl (plugin\_\-handle {\em handle}, const char $\ast$ {\em path}, void $\ast$ {\em buff}, size\_\-t {\em size}, GError $\ast$$\ast$ {\em err})}\label{gfal__common__lfc_8c_65c91b05b7dea8642374bc4e3e477c19}


lfc getxattr for the path -$>$ surls resolution \index{gfal_common_lfc.c@{gfal\_\-common\_\-lfc.c}!lfc_getxattrG@{lfc\_\-getxattrG}}
\index{lfc_getxattrG@{lfc\_\-getxattrG}!gfal_common_lfc.c@{gfal\_\-common\_\-lfc.c}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}ssize\_\-t lfc\_\-getxattr\-G (plugin\_\-handle {\em handle}, const char $\ast$ {\em path}, const char $\ast$ {\em name}, void $\ast$ {\em buff}, size\_\-t {\em size}, GError $\ast$$\ast$ {\em err})}\label{gfal__common__lfc_8c_81a95ba12afada4ce138ed309508f889}


lfc getxattr implem \index{gfal_common_lfc.c@{gfal\_\-common\_\-lfc.c}!lfc_is_used_parameter@{lfc\_\-is\_\-used\_\-parameter}}
\index{lfc_is_used_parameter@{lfc\_\-is\_\-used\_\-parameter}!gfal_common_lfc.c@{gfal\_\-common\_\-lfc.c}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}int lfc\_\-is\_\-used\_\-parameter (plugin\_\-handle {\em handle}, const char $\ast$ {\em namespace}, const char $\ast$ {\em key})}\label{gfal__common__lfc_8c_f669f5bc357dba43cc9bf452d5cebf1c}


signals the lfc parameters :\begin{itemize}
\item LFC\_\-HOST : (lfc, host) \end{itemize}
\index{gfal_common_lfc.c@{gfal\_\-common\_\-lfc.c}!lfc_listxattrG@{lfc\_\-listxattrG}}
\index{lfc_listxattrG@{lfc\_\-listxattrG}!gfal_common_lfc.c@{gfal\_\-common\_\-lfc.c}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}ssize\_\-t lfc\_\-listxattr\-G (plugin\_\-handle {\em handle}, const char $\ast$ {\em path}, char $\ast$ {\em list}, size\_\-t {\em size}, GError $\ast$$\ast$ {\em err})}\label{gfal__common__lfc_8c_b1b1a0499ef8e0fda5a569d34b5e0bee}


lfc getxattr implem \index{gfal_common_lfc.c@{gfal\_\-common\_\-lfc.c}!lfc_notify_change_parameter@{lfc\_\-notify\_\-change\_\-parameter}}
\index{lfc_notify_change_parameter@{lfc\_\-notify\_\-change\_\-parameter}!gfal_common_lfc.c@{gfal\_\-common\_\-lfc.c}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}void lfc\_\-notify\_\-change\_\-parameter (plugin\_\-handle {\em handle}, const char $\ast$ {\em namespace}, const char $\ast$ {\em key})}\label{gfal__common__lfc_8c_17278b0b118ad8453aae47db7bee6b67}


Receive notification of a change in the parameter, take care of it \index{gfal_common_lfc.c@{gfal\_\-common\_\-lfc.c}!lfc_renameG@{lfc\_\-renameG}}
\index{lfc_renameG@{lfc\_\-renameG}!gfal_common_lfc.c@{gfal\_\-common\_\-lfc.c}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}int lfc\_\-rename\-G (plugin\_\-handle {\em handle}, const char $\ast$ {\em oldpath}, const char $\ast$ {\em newpath}, GError $\ast$$\ast$ {\em err})}\label{gfal__common__lfc_8c_b9390ad8a22cb5a0137547bb894d85b7}


Implementation of the rename call for the lfc plugin return 0 if success else -1 if error and set GError \index{gfal_common_lfc.c@{gfal\_\-common\_\-lfc.c}!lfc_resolve_guid@{lfc\_\-resolve\_\-guid}}
\index{lfc_resolve_guid@{lfc\_\-resolve\_\-guid}!gfal_common_lfc.c@{gfal\_\-common\_\-lfc.c}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}char$\ast$ lfc\_\-resolve\_\-guid (plugin\_\-handle {\em handle}, const char $\ast$ {\em guid}, GError $\ast$$\ast$ {\em err})}\label{gfal__common__lfc_8c_5e7057c566c276986a69faa94abd3b82}


Convert a guid to a plugin url if possible return the link in a plugin's url string or err and NULL if not found \index{gfal_common_lfc.c@{gfal\_\-common\_\-lfc.c}!lfc_setxattr_comment@{lfc\_\-setxattr\_\-comment}}
\index{lfc_setxattr_comment@{lfc\_\-setxattr\_\-comment}!gfal_common_lfc.c@{gfal\_\-common\_\-lfc.c}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}int lfc\_\-setxattr\_\-comment (plugin\_\-handle {\em handle}, const char $\ast$ {\em path}, const char $\ast$ {\em name}, const void $\ast$ {\em value}, size\_\-t {\em size}, int {\em flags}, GError $\ast$$\ast$ {\em err})}\label{gfal__common__lfc_8c_08bd87b3857f5a147b6defda0c61c5e4}


setxattr function special for comments \index{gfal_common_lfc.c@{gfal\_\-common\_\-lfc.c}!lfc_setxattrG@{lfc\_\-setxattrG}}
\index{lfc_setxattrG@{lfc\_\-setxattrG}!gfal_common_lfc.c@{gfal\_\-common\_\-lfc.c}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}int lfc\_\-setxattr\-G (plugin\_\-handle {\em handle}, const char $\ast$ {\em path}, const char $\ast$ {\em name}, const void $\ast$ {\em value}, size\_\-t {\em size}, int {\em flags}, GError $\ast$$\ast$ {\em err})}\label{gfal__common__lfc_8c_678da8773fc09be4050e03a4a21eadf9}


lfc setxattr implem \index{gfal_common_lfc.c@{gfal\_\-common\_\-lfc.c}!lfc_statG@{lfc\_\-statG}}
\index{lfc_statG@{lfc\_\-statG}!gfal_common_lfc.c@{gfal\_\-common\_\-lfc.c}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}int lfc\_\-stat\-G (plugin\_\-handle {\em handle}, const char $\ast$ {\em path}, struct stat $\ast$ {\em st}, GError $\ast$$\ast$ {\em err})}\label{gfal__common__lfc_8c_ab708b142708ecaa8283d0a996a4dd32}


execute a posix stat request on the lfc return 0 and set struct if correct answer, else return negative value and set GError \index{gfal_common_lfc.c@{gfal\_\-common\_\-lfc.c}!lfc_symlinkG@{lfc\_\-symlinkG}}
\index{lfc_symlinkG@{lfc\_\-symlinkG}!gfal_common_lfc.c@{gfal\_\-common\_\-lfc.c}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}int lfc\_\-symlink\-G (plugin\_\-handle {\em handle}, const char $\ast$ {\em oldpath}, const char $\ast$ {\em newpath}, GError $\ast$$\ast$ {\em err})}\label{gfal__common__lfc_8c_5d1f7f46eb2843996cf95fd020086675}


Implementation of the symlink\-G call for the lfc plugin return 0 if success else -1 if error and set GError 