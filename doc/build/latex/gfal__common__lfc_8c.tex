\section{/home/adevress/myworkspace/gfal/src/common/lfc/gfal\_\-common\_\-lfc.c File Reference}
\label{gfal__common__lfc_8c}\index{/home/adevress/myworkspace/gfal/src/common/lfc/gfal_common_lfc.c@{/home/adevress/myworkspace/gfal/src/common/lfc/gfal\_\-common\_\-lfc.c}}
file for the lfc catalog module 

{\tt \#include $<$regex.h$>$}\par
{\tt \#include $<$pthread.h$>$}\par
{\tt \#include $<$errno.h$>$}\par
{\tt \#include $<$sys/types.h$>$}\par
{\tt \#include $<$dirent.h$>$}\par
{\tt \#include $<$attr/xattr.h$>$}\par
{\tt \#include \char`\"{}gfal\_\-common\_\-lfc.h\char`\"{}}\par
{\tt \#include \char`\"{}gfal\_\-common\_\-lfc\_\-open.h\char`\"{}}\par
{\tt \#include \char`\"{}../gfal\_\-common\_\-internal.h\char`\"{}}\par
{\tt \#include \char`\"{}../gfal\_\-constants.h\char`\"{}}\par
{\tt \#include \char`\"{}../gfal\_\-common\_\-errverbose.h\char`\"{}}\par
{\tt \#include \char`\"{}../gfal\_\-common\_\-filedescriptor.h\char`\"{}}\par
{\tt \#include \char`\"{}lfc\_\-ifce\_\-ng.h\char`\"{}}\par
\subsection*{Data Structures}
\begin{CompactItemize}
\item 
struct \textbf{\_\-lfc\_\-opendir\_\-handle}
\end{CompactItemize}
\subsection*{Typedefs}
\begin{CompactItemize}
\item 
typedef \_\-lfc\_\-opendir\_\-handle $\ast$ \textbf{lfc\_\-opendir\_\-handle}\label{gfal__common__lfc_8c_5cac68b08f5b09ea46c43428e0fc2cc2}

\end{CompactItemize}
\subsection*{Functions}
\begin{CompactItemize}
\item 
const char $\ast$ \bf{lfc\_\-get\-Name} ()
\item 
int \bf{lfc\_\-chmod\-G} (catalog\_\-handle handle, const char $\ast$path, mode\_\-t mode, GError $\ast$$\ast$err)
\item 
int \bf{lfc\_\-access\-G} (catalog\_\-handle handle, const char $\ast$lfn, int mode, GError $\ast$$\ast$err)
\item 
int \bf{lfc\_\-rename\-G} (catalog\_\-handle handle, const char $\ast$oldpath, const char $\ast$newpath, GError $\ast$$\ast$err)
\item 
int \bf{lfc\_\-symlink\-G} (catalog\_\-handle handle, const char $\ast$oldpath, const char $\ast$newpath, GError $\ast$$\ast$err)
\item 
int \bf{lfc\_\-stat\-G} (catalog\_\-handle handle, const char $\ast$path, struct stat $\ast$st, GError $\ast$$\ast$err)
\item 
char $\ast$$\ast$ \bf{lfc\_\-get\-SURLG} (catalog\_\-handle handle, const char $\ast$path, GError $\ast$$\ast$err)
\item 
ssize\_\-t \bf{lfc\_\-getxattr\_\-getsurl} (catalog\_\-handle handle, const char $\ast$path, void $\ast$buff, size\_\-t size, GError $\ast$$\ast$err)
\item 
ssize\_\-t \bf{lfc\_\-getxattr\_\-getguid} (struct lfc\_\-ops $\ast$ops, const char $\ast$path, void $\ast$buff, size\_\-t size, GError $\ast$$\ast$err)
\item 
ssize\_\-t \bf{lfc\_\-getxattr\-G} (catalog\_\-handle handle, const char $\ast$path, const char $\ast$name, void $\ast$buff, size\_\-t size, GError $\ast$$\ast$err)
\item 
ssize\_\-t \bf{lfc\_\-listxattr\-G} (catalog\_\-handle handle, const char $\ast$path, char $\ast$list, size\_\-t size, GError $\ast$$\ast$err)
\item 
char $\ast$ \bf{lfc\_\-resolve\_\-guid} (catalog\_\-handle handle, const char $\ast$guid, GError $\ast$$\ast$err)
\item 
gfal\_\-catalog\_\-interface \bf{gfal\_\-plugin\_\-init} (gfal\_\-handle handle, GError $\ast$$\ast$err)
\item 
gboolean \bf{gfal\_\-lfc\_\-check\_\-lfn\_\-url} (catalog\_\-handle handle, const char $\ast$lfn\_\-url, catalog\_\-mode mode, GError $\ast$$\ast$err)
\end{CompactItemize}
\subsection*{Variables}
\begin{CompactItemize}
\item 
const char $\ast$ \textbf{lstat\_\-key\_\-prefix} = \char`\"{}lstat\_\-\char`\"{}\label{gfal__common__lfc_8c_7b9ab9eba66bd31a32acfacc42a87654}

\item 
pthread\_\-mutex\_\-t \textbf{m\_\-lfcinit} = PTHREAD\_\-MUTEX\_\-INITIALIZER\label{gfal__common__lfc_8c_a683cb37b7f14c7d477e4653816d20df}

\end{CompactItemize}


\subsection{Detailed Description}
file for the lfc catalog module 

\begin{Desc}
\item[Author:]Adrien Devresse \end{Desc}
\begin{Desc}
\item[Version:]0.0.1 \end{Desc}
\begin{Desc}
\item[Date:]06/07/2011 \end{Desc}


\subsection{Function Documentation}
\index{gfal_common_lfc.c@{gfal\_\-common\_\-lfc.c}!gfal_lfc_check_lfn_url@{gfal\_\-lfc\_\-check\_\-lfn\_\-url}}
\index{gfal_lfc_check_lfn_url@{gfal\_\-lfc\_\-check\_\-lfn\_\-url}!gfal_common_lfc.c@{gfal\_\-common\_\-lfc.c}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}gboolean gfal\_\-lfc\_\-check\_\-lfn\_\-url (catalog\_\-handle {\em handle}, const char $\ast$ {\em lfn\_\-url}, catalog\_\-mode {\em mode}, GError $\ast$$\ast$ {\em err})}\label{gfal__common__lfc_8c_8baa624b528deb15ff4ee61fa9948ac8}


Check if the passed url and operation is compatible with lfc \index{gfal_common_lfc.c@{gfal\_\-common\_\-lfc.c}!gfal_plugin_init@{gfal\_\-plugin\_\-init}}
\index{gfal_plugin_init@{gfal\_\-plugin\_\-init}!gfal_common_lfc.c@{gfal\_\-common\_\-lfc.c}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}gfal\_\-catalog\_\-interface gfal\_\-plugin\_\-init (gfal\_\-handle {\em handle}, GError $\ast$$\ast$ {\em err})}\label{gfal__common__lfc_8c_5c9edde4d67d96432a319d940a4799f1}


Map function for the lfc interface this function provide the generic CATALOG interface for the LFC catalog. lfc\_\-init\-G do : liblfc shared library load, sym resolve, endpoint check, and catalog function map. \index{gfal_common_lfc.c@{gfal\_\-common\_\-lfc.c}!lfc_accessG@{lfc\_\-accessG}}
\index{lfc_accessG@{lfc\_\-accessG}!gfal_common_lfc.c@{gfal\_\-common\_\-lfc.c}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}int lfc\_\-access\-G (catalog\_\-handle {\em handle}, const char $\ast$ {\em lfn}, int {\em mode}, GError $\ast$$\ast$ {\em err})}\label{gfal__common__lfc_8c_c5d7bae3ad9aea9f912d6b91f8d5731e}


implementation of the access call with the lfc catalog return 0 or -1 if error and report GError$\ast$$\ast$ with error code and message \index{gfal_common_lfc.c@{gfal\_\-common\_\-lfc.c}!lfc_chmodG@{lfc\_\-chmodG}}
\index{lfc_chmodG@{lfc\_\-chmodG}!gfal_common_lfc.c@{gfal\_\-common\_\-lfc.c}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}int lfc\_\-chmod\-G (catalog\_\-handle {\em handle}, const char $\ast$ {\em path}, mode\_\-t {\em mode}, GError $\ast$$\ast$ {\em err})}\label{gfal__common__lfc_8c_f40927feaad58de76b5406eb828102a6}


Implementation of the chmod function with the LFC catalog return 0 or the errno if error, or set GError if serious error \index{gfal_common_lfc.c@{gfal\_\-common\_\-lfc.c}!lfc_getName@{lfc\_\-getName}}
\index{lfc_getName@{lfc\_\-getName}!gfal_common_lfc.c@{gfal\_\-common\_\-lfc.c}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}const char$\ast$ lfc\_\-get\-Name ()}\label{gfal__common__lfc_8c_67715cf749ea720de31abbc67f9f414e}


just return the name of the layer \index{gfal_common_lfc.c@{gfal\_\-common\_\-lfc.c}!lfc_getSURLG@{lfc\_\-getSURLG}}
\index{lfc_getSURLG@{lfc\_\-getSURLG}!gfal_common_lfc.c@{gfal\_\-common\_\-lfc.c}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}char$\ast$$\ast$ lfc\_\-get\-SURLG (catalog\_\-handle {\em handle}, const char $\ast$ {\em path}, GError $\ast$$\ast$ {\em err})}\label{gfal__common__lfc_8c_7c1d8699d8ad924234db163860dadf40}


resolve the lfc link to the surls \index{gfal_common_lfc.c@{gfal\_\-common\_\-lfc.c}!lfc_getxattr_getguid@{lfc\_\-getxattr\_\-getguid}}
\index{lfc_getxattr_getguid@{lfc\_\-getxattr\_\-getguid}!gfal_common_lfc.c@{gfal\_\-common\_\-lfc.c}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}ssize\_\-t lfc\_\-getxattr\_\-getguid (struct lfc\_\-ops $\ast$ {\em ops}, const char $\ast$ {\em path}, void $\ast$ {\em buff}, size\_\-t {\em size}, GError $\ast$$\ast$ {\em err})}\label{gfal__common__lfc_8c_7190518fdee00f531882d241dc5b5ee2}


lfc getxattr for the path -$>$ guid resolution \index{gfal_common_lfc.c@{gfal\_\-common\_\-lfc.c}!lfc_getxattr_getsurl@{lfc\_\-getxattr\_\-getsurl}}
\index{lfc_getxattr_getsurl@{lfc\_\-getxattr\_\-getsurl}!gfal_common_lfc.c@{gfal\_\-common\_\-lfc.c}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}ssize\_\-t lfc\_\-getxattr\_\-getsurl (catalog\_\-handle {\em handle}, const char $\ast$ {\em path}, void $\ast$ {\em buff}, size\_\-t {\em size}, GError $\ast$$\ast$ {\em err})}\label{gfal__common__lfc_8c_3b14a6913fa0483a07076140d46bbf99}


lfc getxattr for the path -$>$ surls resolution \index{gfal_common_lfc.c@{gfal\_\-common\_\-lfc.c}!lfc_getxattrG@{lfc\_\-getxattrG}}
\index{lfc_getxattrG@{lfc\_\-getxattrG}!gfal_common_lfc.c@{gfal\_\-common\_\-lfc.c}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}ssize\_\-t lfc\_\-getxattr\-G (catalog\_\-handle {\em handle}, const char $\ast$ {\em path}, const char $\ast$ {\em name}, void $\ast$ {\em buff}, size\_\-t {\em size}, GError $\ast$$\ast$ {\em err})}\label{gfal__common__lfc_8c_b4cd844c617093e2a9d612583fb334f7}


lfc getxattr implem \index{gfal_common_lfc.c@{gfal\_\-common\_\-lfc.c}!lfc_listxattrG@{lfc\_\-listxattrG}}
\index{lfc_listxattrG@{lfc\_\-listxattrG}!gfal_common_lfc.c@{gfal\_\-common\_\-lfc.c}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}ssize\_\-t lfc\_\-listxattr\-G (catalog\_\-handle {\em handle}, const char $\ast$ {\em path}, char $\ast$ {\em list}, size\_\-t {\em size}, GError $\ast$$\ast$ {\em err})}\label{gfal__common__lfc_8c_e0af2e851445fcb0339ed760a9a78aff}


lfc getxattr implem \index{gfal_common_lfc.c@{gfal\_\-common\_\-lfc.c}!lfc_renameG@{lfc\_\-renameG}}
\index{lfc_renameG@{lfc\_\-renameG}!gfal_common_lfc.c@{gfal\_\-common\_\-lfc.c}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}int lfc\_\-rename\-G (catalog\_\-handle {\em handle}, const char $\ast$ {\em oldpath}, const char $\ast$ {\em newpath}, GError $\ast$$\ast$ {\em err})}\label{gfal__common__lfc_8c_cb750f4f936abd772a5f53f5b1fbdaec}


Implementation of the rename call for the lfc catalog return 0 if success else -1 if error and set GError \index{gfal_common_lfc.c@{gfal\_\-common\_\-lfc.c}!lfc_resolve_guid@{lfc\_\-resolve\_\-guid}}
\index{lfc_resolve_guid@{lfc\_\-resolve\_\-guid}!gfal_common_lfc.c@{gfal\_\-common\_\-lfc.c}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}char$\ast$ lfc\_\-resolve\_\-guid (catalog\_\-handle {\em handle}, const char $\ast$ {\em guid}, GError $\ast$$\ast$ {\em err})}\label{gfal__common__lfc_8c_b8943f8f5fd7211851bf7732d9c3b50b}


Convert a guid to a catalog url if possible return the link in a catalog's url string or err and NULL if not found \index{gfal_common_lfc.c@{gfal\_\-common\_\-lfc.c}!lfc_statG@{lfc\_\-statG}}
\index{lfc_statG@{lfc\_\-statG}!gfal_common_lfc.c@{gfal\_\-common\_\-lfc.c}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}int lfc\_\-stat\-G (catalog\_\-handle {\em handle}, const char $\ast$ {\em path}, struct stat $\ast$ {\em st}, GError $\ast$$\ast$ {\em err})}\label{gfal__common__lfc_8c_51eb57986d959b753dbad4737f3e1b6f}


execute a posix stat request on the lfc return 0 and set struct if correct answer, else return negative value and set GError \index{gfal_common_lfc.c@{gfal\_\-common\_\-lfc.c}!lfc_symlinkG@{lfc\_\-symlinkG}}
\index{lfc_symlinkG@{lfc\_\-symlinkG}!gfal_common_lfc.c@{gfal\_\-common\_\-lfc.c}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}int lfc\_\-symlink\-G (catalog\_\-handle {\em handle}, const char $\ast$ {\em oldpath}, const char $\ast$ {\em newpath}, GError $\ast$$\ast$ {\em err})}\label{gfal__common__lfc_8c_28bfec8a5e66b63c082c444997ec5702}


Implementation of the symlink\-G call for the lfc catalog return 0 if success else -1 if error and set GError 