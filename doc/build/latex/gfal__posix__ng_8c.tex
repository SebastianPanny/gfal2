\section{/home/adevress/myworkspace/gfal/src/posix/gfal\_\-posix\_\-ng.c File Reference}
\label{gfal__posix__ng_8c}\index{/home/adevress/myworkspace/gfal/src/posix/gfal_posix_ng.c@{/home/adevress/myworkspace/gfal/src/posix/gfal\_\-posix\_\-ng.c}}
new file for the posix interface 

{\tt \#include \char`\"{}../common/gfal\_\-constants.h\char`\"{}}\par
{\tt \#include \char`\"{}gfal\_\-posix\_\-api.h\char`\"{}}\par
{\tt \#include \char`\"{}gfal\_\-posix\_\-internal.h\char`\"{}}\par
\subsection*{Functions}
\begin{CompactItemize}
\item 
int \bf{gfal\_\-access} (const char $\ast$path, int amode)
\begin{CompactList}\small\item\em test access to the given file \item\end{CompactList}\item 
int \bf{gfal\_\-chmod} (const char $\ast$path, mode\_\-t mode)
\begin{CompactList}\small\item\em change the right for a file or a folder \item\end{CompactList}\item 
int \bf{gfal\_\-rename} (const char $\ast$oldpath, const char $\ast$newpath)
\begin{CompactList}\small\item\em change the name or location of a file oldpath and newpath need to be on the same plugin this functions work only with plugins (lfc ) and local files \item\end{CompactList}\item 
int \bf{gfal\_\-stat} (const char $\ast$path, struct stat $\ast$buff)
\begin{CompactList}\small\item\em informations about a file These functions return information about a file. No permissions are required on the file itself, but \^{a}€” in the case of stat() and lstat() \^{a}€” execute (search) permission is required on all of the directories in path that lead to the file. \item\end{CompactList}\item 
int \bf{gfal\_\-lstat} (const char $\ast$path, struct stat $\ast$buff)\label{group__posix__group_g347f867802a33bc04fdfb769da857103}

\begin{CompactList}\small\item\em gfal\_\-lstat is identical to \doxyref{gfal\_\-stat}{p.}{group__posix__group_g1d8c86d522d5dd26ee7ddcd9c6925964} except for symbolic links. In this case, the link itself is statted and not followed. \item\end{CompactList}\item 
int \bf{gfal\_\-mkdirp} (const char $\ast$path, mode\_\-t mode)
\begin{CompactList}\small\item\em create a new directory creates a new directory with permission bits taken from mode. The default behavior of this command is recursive, like \char`\"{}mkdir -p\char`\"{}. \item\end{CompactList}\item 
int \bf{gfal\_\-mkdir} (const char $\ast$path, mode\_\-t mode)
\item 
int \bf{gfal\_\-rmdir} (const char $\ast$path)
\begin{CompactList}\small\item\em removes a directory if it is empty remove an existing directory, return error if the dir is not empty \item\end{CompactList}\item 
DIR $\ast$ \bf{gfal\_\-opendir} (const char $\ast$name)
\begin{CompactList}\small\item\em open a directory \item\end{CompactList}\item 
dirent $\ast$ \bf{gfal\_\-readdir} (DIR $\ast$d)
\begin{CompactList}\small\item\em read a directory \item\end{CompactList}\item 
int \bf{gfal\_\-closedir} (DIR $\ast$d)
\begin{CompactList}\small\item\em read a directory close the file descriptor of an opendir call \item\end{CompactList}\item 
int \bf{gfal\_\-open} (const char $\ast$path, int flag, mode\_\-t mode)
\begin{CompactList}\small\item\em open a file opens a file according to the value of flags. \item\end{CompactList}\item 
int \bf{gfal\_\-creat} (const char $\ast$filename, mode\_\-t mode)
\begin{CompactList}\small\item\em create a new file or truncate an existing one opens a file according to the value of flags. \item\end{CompactList}\item 
int \bf{gfal\_\-read} (int fd, void $\ast$buff, size\_\-t s\_\-buff)
\begin{CompactList}\small\item\em read a file gfal\_\-read reads up to size bytes from the file descriptor fd into the buffer pointed by buff \item\end{CompactList}\item 
int \bf{gfal\_\-write} (int fd, const void $\ast$buff, size\_\-t s\_\-buff)
\begin{CompactList}\small\item\em write a file gfal\_\-write writes size bytes from the buffer pointed by buff to the file descriptor fd. \item\end{CompactList}\item 
int \bf{gfal\_\-close} (int fd)
\begin{CompactList}\small\item\em close a file closes the file whose descriptor fd is the one returned by gfal\_\-open. \item\end{CompactList}\item 
int \bf{gfal\_\-symlink} (const char $\ast$oldpath, const char $\ast$newpath)
\begin{CompactList}\small\item\em make a new name for a file symlink() creates a symbolic link named newpath which contains the string oldpath. \item\end{CompactList}\item 
off\_\-t \bf{gfal\_\-lseek} (int fd, off\_\-t offset, int whence)
\begin{CompactList}\small\item\em set position in a file gfal\_\-lseek positions/repositions to offset the file associated with the descriptor fd generated by a previous gfal\_\-open. whence indicates how to interpret the offset value: \item\end{CompactList}\item 
ssize\_\-t \bf{gfal\_\-getxattr} (const char $\ast$path, const char $\ast$name, void $\ast$value, size\_\-t size)
\begin{CompactList}\small\item\em retrieve an extended attribute value gfal\_\-getxattr retrieves an extended value from an url managed by gfal \item\end{CompactList}\item 
ssize\_\-t \textbf{gfal\_\-readlink} (const char $\ast$path, char $\ast$buff, size\_\-t buffsiz)\label{group__posix__group_g3a5bc0f156017008ab7fdb92cb6f9c80}

\item 
int \textbf{gfal\_\-unlink} (const char $\ast$path)\label{group__posix__group_gdeb4c6cc47f507da3e3b498374e308fb}

\item 
ssize\_\-t \bf{gfal\_\-listxattr} (const char $\ast$path, char $\ast$list, size\_\-t size)
\begin{CompactList}\small\item\em list all extended attributes gfal\_\-listxattr list all extended atributes associated with a file \item\end{CompactList}\item 
void \bf{gfal\_\-posix\_\-print\_\-error} ()
\item 
void \bf{gfal\_\-posix\_\-release\_\-error} ()
\item 
void \bf{gfal\_\-posix\_\-clear\_\-error} ()
\item 
int \bf{gfal\_\-posix\_\-code\_\-error} ()
\item 
int \bf{gfal\_\-posix\_\-check\_\-error} ()
\item 
char $\ast$ \bf{gfal\_\-posix\_\-strerror\_\-r} (char $\ast$buff\_\-err, size\_\-t s\_\-err)
\item 
void \textbf{gfal\_\-set\_\-nobdii} (int value)\label{gfal__posix__ng_8c_a3f35e131b2db4c3b742a29790e08bdf}

\item 
int \textbf{gfal\_\-is\_\-nobdii} ()\label{gfal__posix__ng_8c_0d2a0557bdb571ccb85c6ab5c05ae56f}

\end{CompactItemize}


\subsection{Detailed Description}
new file for the posix interface 

\begin{Desc}
\item[Author:]Devresse Adrien \end{Desc}
\begin{Desc}
\item[Date:]09/05/2011 \end{Desc}


\subsection{Function Documentation}
\index{gfal_posix_ng.c@{gfal\_\-posix\_\-ng.c}!gfal_mkdirp@{gfal\_\-mkdirp}}
\index{gfal_mkdirp@{gfal\_\-mkdirp}!gfal_posix_ng.c@{gfal\_\-posix\_\-ng.c}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}int gfal\_\-mkdirp (const char $\ast$ {\em path}, mode\_\-t {\em mode})}\label{gfal__posix__ng_8c_412d6606fcf2f735747f278eab8af19a}


create a new directory creates a new directory with permission bits taken from mode. The default behavior of this command is recursive, like \char`\"{}mkdir -p\char`\"{}. 

\begin{Desc}
\item[Parameters:]
\begin{description}
\item[{\em path}]: url of the directory, can be in supported protocols (lfn, srm, file, guid,..) \item[{\em mode}]: right of the directory ( depend of the implementation ) \end{description}
\end{Desc}
\begin{Desc}
\item[Returns:]return 0 if success else -1 and errno is set call \doxyref{gfal\_\-posix\_\-check\_\-error()}{p.}{gfal__posix__ng_8c_57ced6eae7afd2d0413988da02fe0373} to check it\begin{itemize}
\item ERRNO list : \par
\begin{itemize}
\item usual errors:\begin{itemize}
\item ENOENT: The named file/directory does not exist.\item EACCES: Write perimission is denied for newpath or oldpath, or, search permission is denied for one of the directories in the path prefix of oldpath or newpath, or oldpath is a directory and does not allow write permission (needed to update the .. entry)\item EFAULT: oldpath or newpath is a NULL pointer\item ENOTDIR: A component of path prefix is not a directory\begin{itemize}
\item EEXIST: file already exist\end{itemize}
\item ECOMM: Communication error\item EPROTONOSUPPORT: oldpath or newpath has a syntax error or the protocol speficied is not supported\item EINVAL: oldpath or newpath has an invalid syntax . \end{itemize}
\end{itemize}
\end{itemize}
\end{Desc}
\index{gfal_posix_ng.c@{gfal\_\-posix\_\-ng.c}!gfal_posix_check_error@{gfal\_\-posix\_\-check\_\-error}}
\index{gfal_posix_check_error@{gfal\_\-posix\_\-check\_\-error}!gfal_posix_ng.c@{gfal\_\-posix\_\-ng.c}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}int gfal\_\-posix\_\-check\_\-error ()}\label{gfal__posix__ng_8c_57ced6eae7afd2d0413988da02fe0373}


check the current error, if no error report return 0 else return 1 and print the error on stderr \begin{Desc}
\item[Warning:]this does not clear the error \end{Desc}
\begin{Desc}
\item[Examples: ]\par
\bf{gfal\_\-testchmod.c}, \bf{gfal\_\-testcreatedir.c}, \bf{gfal\_\-testget.c}, \bf{gfal\_\-testread.c}, and \bf{gfal\_\-testrw.c}.\end{Desc}
\index{gfal_posix_ng.c@{gfal\_\-posix\_\-ng.c}!gfal_symlink@{gfal\_\-symlink}}
\index{gfal_symlink@{gfal\_\-symlink}!gfal_posix_ng.c@{gfal\_\-posix\_\-ng.c}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}int gfal\_\-symlink (const char $\ast$ {\em oldpath}, const char $\ast$ {\em newpath})}\label{gfal__posix__ng_8c_c9b6944315e891beca5a56d15292658f}


make a new name for a file symlink() creates a symbolic link named newpath which contains the string oldpath. 

\begin{Desc}
\item[Parameters:]
\begin{description}
\item[{\em newpath}]: path of the link, can be in supported protocols but need to be in the same adress space than newpath \item[{\em oldpath}]: path of the linked file, can be in supported protocols (lfn, srm, file, guid,..) \end{description}
\end{Desc}
\begin{Desc}
\item[Returns:]0 if success else -1. if failure, errno is set, you can call \doxyref{gfal\_\-posix\_\-check\_\-error()}{p.}{gfal__posix__ng_8c_57ced6eae7afd2d0413988da02fe0373} for a more complete description. \end{Desc}
