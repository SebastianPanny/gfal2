\section{gfal\_\-testdir.c}
This exemple show how to list the files in a directory ex : use case with SRM plugin : ./gfal\_\-testdir srm://grid05.lal.in2p3.fr:8446/dpm/lal.in2p3.fr/home/dteam/test\_\-r2d2



\begin{DocInclude}\begin{verbatim}1 
5 #include <stdio.h>
6 #include <stdlib.h>
7 #include "gfal_api.h"
8 
9 main(int argc, char **argv)
10 {
11         struct dirent *d;
12         DIR *dir;
13 
14         if (argc != 2) {
15                 fprintf (stderr, "usage: %s filename\n", argv[0]);
16                 exit (1);
17         }
18 
19         if ((dir = gfal_opendir (argv[1])) == NULL) {
20                 perror ("gfal_opendir");
21                 exit (1);
22         }
23 
24 #if defined(__USE_FILE_OFFSET64)
25         while ((d = gfal_readdir64 (dir))) {
26 #else
27         while ((d = gfal_readdir (dir))) {
28 #endif
29                 printf ("%s\n", d->d_name);
30         }
31 
32         if (gfal_closedir (dir) < 0) {
33                 perror ("gfal_closedir");
34                 exit (1);
35         }
36         exit (0);
37 }
\end{verbatim}
\end{DocInclude}
 